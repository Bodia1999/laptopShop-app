<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bear</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <!--<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>-->
    <!--<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>-->
    <!--<link href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">-->
    <!--<script src="//netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>-->
    <!--<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../main.page.css/registration.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>

    <!--<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>-->
</head>
<body>
<!---->
<div>
    <header>
        <div class="logo">
            <div class="graphic-logo">
                <a href="index.html"><img class="logotype" src="../photo/images_for_main_page/FINAL_VERSION.png"
                                          alt="logo"></a>
            </div>

            <div class="info">
                <!--<a href="#"><img src="img/log_in_final.png" alt=""></a>-->
                <a href="#" onclick="checkingForToken()"><img src="../photo/person1.png" alt=""></a>
                <a href="#" onclick="checkingForTokenToCart()"><img src="../photo/images_for_main_page/cart.png" alt=""></a>
            </div>
        </div>
    </header>

</div>


<div class="container">
    <form class="form-horizontal" role="form">
        <h2>Registration</h2>
        <div class="form-group">
            <label for="firstName" class="col-sm-3 control-label">First Name</label>
            <div class="col-sm-9">
                <input type="text" id="firstName" placeholder="First Name" class="form-control" autofocus required>
            </div>
        </div>
        <div class="form-group">
            <label for="lastName" class="col-sm-3 control-label">Last Name</label>
            <div class="col-sm-9">
                <input type="text" id="lastName" placeholder="Last Name" class="form-control" autofocus required>
            </div>
        </div>
        <div class="form-group">
            <label for="email" class="col-sm-3 control-label">Email* </label>
            <div class="col-sm-9">
                <input type="email" id="email" placeholder="Email" class="form-control" name="email" required>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-3 control-label">Password*</label>
            <div class="col-sm-9">
                <input type="password" id="password" placeholder="Password" minlength="6" maxlength="20" class="form-control" required>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-3 control-label">Confirm Password*</label>
            <div class="col-sm-9">
                <input type="password" id="password1" placeholder="Password" minlength="6" maxlength="20" class="form-control"
                       required>
            </div>
        </div>
        <div class="form-group">
            <label for="birthDate" class="col-sm-3 control-label">Date of Birth*</label>
            <div class="col-sm-9">
                <input type="text" id="birthDate" class="form-control" placeholder="01.01.2019">
            </div>
        </div>
        <div class="form-group">
            <label for="phoneNumber" class="col-sm-3 control-label">Phone number </label>
            <div class="col-sm-9">
                <input type="text" id="phoneNumber" placeholder="+380yyxxxxxxx " class="form-control" required>

            </div>
        </div>
        <div class="form-group">
            <label for="Address" class="col-sm-3 control-label">Address* </label>
            <div class="col-sm-9">
                <input type="text" id="address" placeholder="Please write address" maxlength="255" class="form-control">
            </div>
        </div>

        <!--
                        <div class="form-group">
                            <label class="control-label col-sm-3">Gender</label>
                            <div class="col-sm-6">
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label class="radio-inline">
                                            <input type="radio" id="femaleRadio" value="Female">Female
                                        </label>
                                    </div>
                                    <div class="col-sm-4">
                                        <label class="radio-inline">
                                            <input type="radio" id="maleRadio" value="Male">Male
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>  /.form-group
        -->
        <div class="form-group">
            <div class="col-sm-9 col-sm-offset-3">
                <span class="help-block">*Required fields</span>
            </div>
        </div>
        <!--<button type="submit" class="btn btn-primary btn-block" id="registrate-button">Register</button>-->
        <button class="btn btn-primary btn-block" id="registration-button">Register</button>
        <!--<button id="getDate-button">Date</button>-->
    </form> <!-- /form -->
</div> <!-- ./container -->

<script>

    function checkingForToken() {
        if(!window.localStorage.getItem('token')){
            window.location.href = 'http://localhost:8000/main.page/sign.html';
        }else {
            window.location.href = 'http://localhost:8000/main.page/profile.html';
        }
    }
    function checkingForTokenToCart() {

        if(!window.localStorage.getItem('token')){
            window.location.href = 'http://localhost:8000/main.page/sign.html';
        }else {
            window.location.href = 'http://localhost:8000/main.page/cart.html';
        }
    }
    window.onload = function(){
        $('.form-horizontal').validate();
    };
    //     $(function(){
    // 	$.validator.setDefaults({
    // 		highlight: function(element){
    // 			$(element)
    // 			.closest('.form-group')
    // 			.addClass('has-error')
    // 		},
    // 		unhighlight: function(element){
    // 			$(element)
    // 			.closest('.form-group')
    // 			.removeClass('has-error')
    // 		}
    // 	});
    //
    // 	$.validate({
    // 		rules:
    // 		{
    // 		    password: "required",
    // 			birthDate: "required",
    //
    // 			address:  {
    // 			    required:true,
    // 			    address:true
    // 			},
    // 			email: {
    // 				required: true,
    // 				email: true
    // 			}
    // 		},
    // 			messages:{
    // 				email: {
    // 				required: true,
    // 				email: true
    // 			}
    // 		},
    // 				password: {
    // 					required: " Please enter password"
    // 				},
    // 				birthDate: {
    // 					required: " Please enter birthdate"
    // 				},
    // 				email: {
    // 					required: ' Please enter email',
    // 					email: ' Please enter valid email'
    // 				},
    // 				weight: {
    // 					required: " Please enter your weight",
    // 					number: " Only numbers allowed"
    // 				},
    // 				height: {
    // 					required: " Please enter your height",
    // 					number: " Only numbers allowed"
    // 				},
    // 			});
    //
    //
    // });

    $('.form-horizontal').validate();
    var validate = $('.form-horizontal').validate();
    console.log(validate);

    // $('#getDate-button').click(function () {
    //     console.log($('#birthDate').getMonth());
    // });



    $('#registration-button').click(function (e) {
        // console.log(getElem());
        // if (!$('.form-horizontal').validate()) {
        //     return
        //     // $('#registration-button').attr('disabled', true);
        // } else {
            // $('#registration-button').attr('disabled', false);
            e.preventDefault();


                registerFunc(getElem());

            // if ( element){
            //     window.location.href = '/main.page/index.html';
            // }else {
            //
            // }

        // }
        // console.log(getElem);


    });


    function getElem() {
        var name = $('#firstName').val();
        var surname = $('#lastName').val();
        var email = $('#email').val();
        var password = $('#password').val();
        var phoneNumber = $('#phoneNumber').val();
        var address = $('#address').val();
        var date = $('#birthDate').val();
        // var day = date.getDate();
        // var month = date.getMonth()-1;
        // var year = date.getFullYear();
        // var birthDate = [day,month,year].join('/');
        // console.log(birthDate);
        //
        let request = {
            name: name,
            surname: surname,
            password: password,
            login: email,
            address: address,
            phoneNumber: phoneNumber,
            dateBirth: date


        };

        return request;
    }


    function registerFunc(getElem) {
        $.ajax({
            url: 'http://localhost:8000/public/register',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(getElem),
            success: function (answer) {
                window.localStorage.setItem('token', `Bearer ${answer.password}`);
                window.localStorage.setItem('customerId', answer.id);


                 window.location.href = '/main.page/index.html';
                // $('.container').html('');
                // for (let laptop of pages.content) {
                //     console.log(laptop);
                //     appendProduct(laptop);
                //
                // }
                // $('.center').html('');
                // for (let i = 1; i < pages.totalPages + 1; i++) {
                //
                //     appendPageButton(i);
                // }
                // location.reload;
            },
            error: (e) => {


                alert("Your email has already used or your data is not valid!")
            }
        });
    };


</script>
<footer class="container-footer">
    <div class="footer_main_column">


        <a class="footer-columns" href="index.html"><img src="../photo/FINAL_VERSION.png" alt=""></a>


        <ol class="footer-columns">
            <li>
                Our Contacts:
            </li>
            <br>
            <li class="font_line">
                <b class="footer-columns">0971234567</b>
            </li>
            <br>
            <li>
                bogdanpapizhasnkiy@gmail.com
            </li>
        </ol>
    </div>

    <div class="footer_first_column">
        <h1><b class="footer-columns">Bear</b></h1>
        <ol>
            <li>
                <a class="footer-columns"
                   href="https://www.google.com/maps/place/%D0%9A%D1%83%D1%80%D1%81%D0%B8+%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D1%83%D0%B2%D0%B0%D0%BD%D0%BD%D1%8F/@49.8317506,24.0308476,17.04z/data=!4m5!3m4!1s0x0:0xfcf194b486271721!8m2!3d49.8311359!4d24.0332063"
                   target="_blank">Our location</a>
            </li>
            <br>
            <li>
                <a class="footer-columns" href="#">About us</a>
            </li>
        </ol>
    </div>
    <div class="footer_second_column">
        <h1><b class="footer-columns">Categories</b></h1>
        <ol>
            <li>
                <a class="footer-columns" href="#">All products</a>
            </li>
            <br>
            <li>
                <a class="footer-columns" href="appleMacBook.html">Apple MacBook</a>
            </li>
            <br>
            <li>
                <a class="footer-columns" href="acer.html">Acer</a>
            </li>
            <br>
            <li>
                <a class="footer-columns" href="asus.html">Asus</a>
            </li>
            <br>
            <li>
                <a class="footer-columns" href="lenovo.html">Lenovo</a>
            </li>
            <br>
            <li>
                <a class="footer-columns" href="hp.html">HP</a>
            </li>
            <br>
            <li>
                <a class="footer-columns" class="footer-columns" href="xiaomi.html">Xiaomi</a>
            </li>
            <br>
        </ol>
    </div>
    <div class="footer_third_column">
        <h1 class="footer-columns">For Clients</h1>
        <ol>
            <li>
                <a class="footer-columns" href="#">Delivery</a>
            </li>
            <br>
            <li>
                <a class="footer-columns" href="#">Payment</a>
            </li>
            <br>
            <li>
                <a class="footer-columns" href="#">Guarantee, exchange<br> and return</a>
            </li>
            <br>
        </ol>
    </div>
    <div class="social_networkings">
        <a class="footer-columns" href="#" target="_blank"><img src="../photo/telegram1.png" alt=""></a>
        <a class="footer-columns" href="#" target="_blank"><img src="../photo/facebook1.png" alt=""></a>
        <a class="footer-columns" href="#" target="_blank"><img src="../photo/instagram1.png" alt=""></a>
        <a class="footer-columns" href="#" target="_blank"><img src="../photo/viber1.png" alt=""></a>
    </div>
</footer>
<!--<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>-->
<!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>-->


<!--
            <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
-->

</body>
</html>